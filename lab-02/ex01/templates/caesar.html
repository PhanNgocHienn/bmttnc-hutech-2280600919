<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Caesar Cipher</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-5">
    <h1 class="text-center mb-5">Caesar Cipher Tool</h1>

    <div class="row g-4">
        <!-- Encrypt -->
        <div class="col-md-6">
            <div class="card border-success shadow-sm">
                <div class="card-header bg-success text-white">üîê Encrypt</div>
                <div class="card-body">
                    <div class="mb-3">
                        <label for="encryptText" class="form-label">Plain Text</label>
                        <input type="text" class="form-control" id="encryptText">
                    </div>
                    <div class="mb-3">
                        <label for="encryptKey" class="form-label">Key</label>
                        <input type="number" class="form-control" id="encryptKey">
                    </div>
                    <button class="btn btn-success" onclick="encryptText()">Encrypt</button>
                    <div class="alert alert-warning mt-3 d-none" id="decryptResultBox">
                        <strong>K·∫øt qu·∫£:</strong>
                        <p id="decryptResult" class="mb-0"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Decrypt -->
        <div class="col-md-6">
            <div class="card border-primary shadow-sm">
                <div class="card-header bg-primary text-white">üîì Decrypt</div>
                <div class="card-body">
                    <div class="mb-3">
                        <label for="decryptText" class="form-label">Cipher Text</label>
                        <input type="text" class="form-control" id="decryptText">
                    </div>
                    <div class="mb-3">
                        <label for="decryptKey" class="form-label">Key</label>
                        <input type="number" class="form-control" id="decryptKey">
                    </div>
                    <button class="btn btn-primary" onclick="decryptText()">Decrypt</button>
                    <div class="alert alert-info mt-3 d-none" id="encryptResultBox">
                        <strong>K·∫øt qu·∫£:</strong>
                        <p id="encryptResult" class="mb-0"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="text-center mt-5">
        <a href="/" class="btn btn-outline-secondary">‚Üê V·ªÅ Trang Ch·ªß</a>
    </div>
</div>

<script>
    function encryptText() {
    const text = document.getElementById("encryptText").value;
    const key = Number(document.getElementById("encryptKey").value);

    fetch("/api/encrypt", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text: text, key: key })
    })
    .then(res => res.json())
    .then(data => {
        // Hi·ªÉn th·ªã k·∫øt qu·∫£ ·ªü ph·∫ßn Encrypt
        const resultBox = document.getElementById("decryptResultBox");
        document.getElementById("decryptResult").textContent = data.result;
        resultBox.classList.remove("d-none");

        // ƒê·∫∑t k·∫øt qu·∫£ v√†o √¥ Cipher Text c·ªßa ph·∫ßn Decrypt
        document.getElementById("decryptText").value = data.result;
    });
}

function decryptText() {
    const text = document.getElementById("decryptText").value;
    const key = Number(document.getElementById("decryptKey").value);

    fetch("/api/decrypt", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text: text, key: key })
    })
    .then(res => res.json())
    .then(data => {
        // Hi·ªÉn th·ªã k·∫øt qu·∫£ ·ªü ph·∫ßn Decrypt
        const resultBox = document.getElementById("encryptResultBox");
        document.getElementById("encryptResult").textContent = data.result;
        resultBox.classList.remove("d-none");

        // ƒê·∫∑t k·∫øt qu·∫£ v√†o √¥ Plain Text c·ªßa ph·∫ßn Encrypt
        document.getElementById("encryptText").value = data.result;
    });
}

    
</script>
</body>
</html>
